<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Riichi Mahjong</title>
        <link rel="stylesheet" href="css/styles.css" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Cinzel:wght@400;500;600&display=swap"
            rel="stylesheet"
        />
    </head>
    <body>
        <!-- Main Menu Screen -->
        <div id="menu-screen" class="screen active">
            <div class="menu-container">
                <div class="logo-section">
                    <div class="mahjong-logo">üÄÑ</div>
                    <h1 class="game-title">Riichi Mahjong</h1>
                    <p class="game-subtitle">Japanese Mahjong</p>
                </div>

                <div class="menu-content">
                    <div class="player-setup">
                        <label for="player-name">Your Name</label>
                        <input
                            type="text"
                            id="player-name"
                            placeholder="Enter your name"
                            maxlength="20"
                            value="Player"
                        />
                    </div>

                    <div class="menu-buttons">
                        <button id="btn-play-ai" class="menu-btn primary">
                            <span class="btn-icon">üéÆ</span>
                            <span class="btn-text">Play vs AI</span>
                        </button>
                        <button id="btn-quick-match" class="menu-btn" disabled>
                            <span class="btn-icon">‚ö°</span>
                            <span class="btn-text">Quick Match</span>
                            <span class="btn-badge">Coming Soon</span>
                        </button>
                        <button id="btn-rules" class="menu-btn secondary">
                            <span class="btn-icon">üìñ</span>
                            <span class="btn-text">How to Play</span>
                        </button>
                    </div>
                </div>

                <div class="menu-footer">
                    <p>A clean implementation of Japanese Riichi Mahjong</p>
                </div>
            </div>
        </div>

        <!-- Rules/Help Screen -->
        <div id="rules-screen" class="screen">
            <div class="rules-container">
                <button id="btn-back-menu" class="back-btn">‚Üê Back</button>
                <h2>How to Play Riichi Mahjong</h2>

                <div class="rules-content">
                    <section class="rules-section">
                        <h3>üéØ Objective</h3>
                        <p>
                            Form a winning hand of 14 tiles consisting of 4 sets
                            (melds) and 1 pair. Sets can be:
                        </p>
                        <ul>
                            <li>
                                <strong>Sequence (Shuntsu):</strong> Three
                                consecutive tiles of the same suit (e.g., 2-3-4
                                Bamboo)
                            </li>
                            <li>
                                <strong>Triplet (Koutsu):</strong> Three
                                identical tiles (e.g., 7-7-7 Characters)
                            </li>
                            <li>
                                <strong>Quad (Kantsu):</strong> Four identical
                                tiles (declared as Kan)
                            </li>
                        </ul>
                    </section>

                    <section class="rules-section">
                        <h3>üÄÑ Tile Types</h3>
                        <div class="tile-examples">
                            <div class="tile-type">
                                <h4>Characters (Manzu) üî¥</h4>
                                <p>Numbered 1-9, shown in red</p>
                            </div>
                            <div class="tile-type">
                                <h4>Circles (Pinzu) üîµ</h4>
                                <p>Numbered 1-9, shown in blue</p>
                            </div>
                            <div class="tile-type">
                                <h4>Bamboo (Souzu) üü¢</h4>
                                <p>Numbered 1-9, shown in green</p>
                            </div>
                            <div class="tile-type">
                                <h4>Honours üü£</h4>
                                <p>
                                    Winds (E/S/W/N) and Dragons
                                    (White/Green/Red)
                                </p>
                            </div>
                        </div>
                    </section>

                    <section class="rules-section">
                        <h3>üé≤ Game Flow</h3>
                        <ol>
                            <li>
                                <strong>Draw:</strong> At your turn, draw a tile
                                from the wall
                            </li>
                            <li>
                                <strong>Decide:</strong> Either declare a win
                                (if ready) or discard a tile
                            </li>
                            <li>
                                <strong>Calls:</strong> When others discard, you
                                can call Chi/Pon/Kan/Ron if applicable
                            </li>
                        </ol>
                    </section>

                    <section class="rules-section">
                        <h3>üì¢ Calls</h3>
                        <ul>
                            <li>
                                <strong>Chi:</strong> Claim a tile to complete a
                                sequence (from player to your left only)
                            </li>
                            <li>
                                <strong>Pon:</strong> Claim a tile to complete a
                                triplet (from any player)
                            </li>
                            <li>
                                <strong>Kan:</strong> Claim to complete a quad
                                (from any player)
                            </li>
                            <li>
                                <strong>Ron:</strong> Claim a winning tile from
                                someone's discard
                            </li>
                            <li>
                                <strong>Tsumo:</strong> Win by drawing your
                                winning tile
                            </li>
                            <li>
                                <strong>Riichi:</strong> Declare when 1-away
                                from winning with a closed hand (costs 1000
                                points)
                            </li>
                        </ul>
                    </section>

                    <section class="rules-section">
                        <h3>üí° Tips for Beginners</h3>
                        <ul>
                            <li>
                                Focus on reducing your shanten (distance from
                                winning)
                            </li>
                            <li>Avoid opening your hand unless necessary</li>
                            <li>
                                Watch what others discard to avoid dealing into
                                their wins
                            </li>
                            <li>Riichi when you're ready with a good wait</li>
                        </ul>
                    </section>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <!-- Connection Status Indicator -->
            <div id="connection-status" class="connection-status">
                <span class="status-dot"></span>
                <span class="status-text">Connecting...</span>
            </div>

            <!-- Game Info Bar -->
            <div class="game-info-bar">
                <div class="info-left">
                    <div class="wall-count">
                        <span class="label">Wall</span>
                        <span id="wall-remaining" class="value">70</span>
                    </div>
                    <div class="turn-count">
                        <span class="label">Turn</span>
                        <span id="turn-count" class="value">1</span>
                    </div>
                </div>
                <div class="info-center">
                    <div class="dora-display">
                        <span class="label">Dora Indicator</span>
                        <div id="dora-tiles" class="dora-tiles"></div>
                    </div>
                </div>
                <div class="info-right">
                    <button id="btn-menu" class="icon-btn" title="Menu">
                        ‚ò∞
                    </button>
                </div>
            </div>

            <!-- Main Game Board -->
            <div class="game-board">
                <!-- Opponent Areas -->
                <div class="opponent-area top" id="player-2-area">
                    <div class="opponent-info">
                        <span class="opponent-name" id="player-2-name"
                            >West</span
                        >
                        <span class="opponent-score" id="player-2-score"
                            >25000</span
                        >
                        <span
                            class="opponent-status"
                            id="player-2-status"
                        ></span>
                    </div>
                    <div class="opponent-hand" id="player-2-hand"></div>
                    <div class="opponent-melds" id="player-2-melds"></div>
                </div>

                <div class="opponent-area left" id="player-3-area">
                    <div class="opponent-info">
                        <span class="opponent-name" id="player-3-name"
                            >North</span
                        >
                        <span class="opponent-score" id="player-3-score"
                            >25000</span
                        >
                        <span
                            class="opponent-status"
                            id="player-3-status"
                        ></span>
                    </div>
                    <div
                        class="opponent-hand vertical"
                        id="player-3-hand"
                    ></div>
                    <div class="opponent-melds" id="player-3-melds"></div>
                </div>

                <div class="opponent-area right" id="player-1-area">
                    <div class="opponent-info">
                        <span class="opponent-name" id="player-1-name"
                            >South</span
                        >
                        <span class="opponent-score" id="player-1-score"
                            >25000</span
                        >
                        <span
                            class="opponent-status"
                            id="player-1-status"
                        ></span>
                    </div>
                    <div
                        class="opponent-hand vertical"
                        id="player-1-hand"
                    ></div>
                    <div class="opponent-melds" id="player-1-melds"></div>
                </div>

                <!-- Center Area (Rivers/Discards) -->
                <div class="center-area">
                    <div class="river-container">
                        <div class="river top" id="player-2-river"></div>
                        <div class="river left" id="player-3-river"></div>
                        <div class="river right" id="player-1-river"></div>
                        <div class="river bottom" id="player-0-river"></div>

                        <!-- Center indicator showing whose turn it is -->
                        <div class="turn-indicator" id="turn-indicator">
                            <div class="wind-display">
                                <span id="current-wind">Êù±</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Player Area (Bottom) -->
            <div class="player-area">
                <div class="player-info-section">
                    <div class="player-info">
                        <span class="player-name" id="player-0-name"
                            >You (East)</span
                        >
                        <span class="player-score" id="player-0-score"
                            >25000</span
                        >
                    </div>
                    <div class="player-status">
                        <span
                            id="player-status-badge"
                            class="status-badge hidden"
                        ></span>
                        <span
                            id="shanten-display"
                            class="shanten-display"
                        ></span>
                    </div>
                    <div class="waits-display" id="waits-display">
                        <span class="label">Waiting for:</span>
                        <div id="waits-tiles" class="waits-tiles"></div>
                    </div>
                </div>

                <div class="player-melds" id="player-0-melds"></div>

                <div class="player-hand-container">
                    <div class="player-hand" id="player-0-hand"></div>
                    <div class="drawn-tile-area" id="drawn-tile"></div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-panel" id="action-panel">
                <div class="action-buttons" id="action-buttons">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- Game Over Overlay -->
            <div id="game-over-overlay" class="overlay hidden">
                <div class="overlay-content game-over-content">
                    <h2 id="game-over-title">Game Over</h2>
                    <div id="game-over-details" class="game-over-details"></div>
                    <div class="final-scores" id="final-scores"></div>
                    <div class="overlay-buttons">
                        <button id="btn-play-again" class="action-btn primary">
                            Play Again
                        </button>
                        <button id="btn-back-to-menu" class="action-btn">
                            Back to Menu
                        </button>
                    </div>
                </div>
            </div>

            <!-- In-Game Menu Overlay -->
            <div id="menu-overlay" class="overlay hidden">
                <div class="overlay-content menu-content">
                    <h2>Menu</h2>
                    <div class="overlay-buttons vertical">
                        <button id="btn-resume" class="action-btn primary">
                            Resume Game
                        </button>
                        <button id="btn-quit-game" class="action-btn danger">
                            Quit Game
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div id="toast-container" class="toast-container"></div>

        <!-- Scripts -->
        <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
        <script src="javascript/render.js"></script>
        <script src="javascript/app.js"></script>
    </body>
</html>
